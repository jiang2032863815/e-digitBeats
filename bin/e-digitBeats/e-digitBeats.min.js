var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},digitBeats;!function(t){t.nil=null}(digitBeats||(digitBeats={}));var digitBeats;!function(t){var e=function(){function e(){this.__pre=t.nil,this.__nxt=t.nil,this.val=t.nil}return e.prototype.nxt=function(){return this.__nxt},e.prototype.pre=function(){return this.__pre},e.prototype.setNxt=function(t){this.__nxt=t},e.prototype.setPre=function(t){this.__pre=t},e.prototype.setVal=function(t){this.val=t},e}();t.Node=e,__reflect(e.prototype,"digitBeats.Node");var n=function(){function n(){this.__head=t.nil,this.__tail=t.nil}return n.prototype.pushBack=function(n){var i=new e;return i.setVal(n),this.__head==t.nil?this.__head=this.__tail=i:(this.__tail.setNxt(i),i.setPre(this.__tail),this.__tail=i),i},n.prototype.pushFront=function(n){var i=new e;return i.setVal(n),this.__head==t.nil?this.__head=this.__tail=i:(this.__head.setPre(i),i.setNxt(this.__head),this.__head=i),i},n.prototype.removeNode=function(e){if(e!=t.nil)if(this.__head==e)this.__head=this.__head.nxt(),this.__head!=t.nil&&this.__head.setPre(t.nil);else if(this.__tail==e)this.__tail=this.__tail.pre(),this.__tail!=t.nil&&this.__tail.setNxt(t.nil);else{if(t.__isDebugMode&&(e.pre()==t.nil||e.nxt()==t.nil))throw new Error("双向链表节点删除错误");e.pre().setNxt(e.nxt()),e.nxt().setPre(e.pre())}},n.prototype.front=function(){return this.__head},n.prototype.back=function(){return this.__tail},n.prototype.isEmpty=function(){return this.__head==t.nil},n.prototype.moveLinkToFront=function(e){e!=t.nil&&e!=this.__head&&this.__head!=this.__tail&&(e.pre().setNxt(t.nil),this.__tail.setNxt(this.__head),this.__head.setPre(this.__tail),this.__head=e,this.__tail=e.pre(),e.setPre(t.nil))},n}();t.LinkList=n,__reflect(n.prototype,"digitBeats.LinkList")}(digitBeats||(digitBeats={}));var digitBeats;!function(t){var e=function(){function e(){this.__frameElements=new t.LinkList,this.__elementMap={},egret.startTick(this.__onTick,this)}return e.prototype.addToFrameSystem=function(t){var e=this.__frameElements.pushBack(t);return this.__elementMap[t.__ruixueCode]=e,e},e.prototype.removeFromFrameSystem=function(t){var e=this.__elementMap[t.__ruixueCode];e&&(delete this.__elementMap[t.__ruixueCode],this.__frameElements.removeNode(e))},e.prototype.__onTick=function(){for(var e=this.__frameElements.front();e!=t.nil;e=e.nxt())e.val.onUpdate();return!1},e}();__reflect(e.prototype,"FrameManager");var n=0,i=new e,r=function(e){function r(){var i=e.call(this)||this;return i.__isInFrameManager=!1,i.parentInterface=new t.InterfaceManager,i.__ruixueCode=++n,i.onStart(),i.__onNew(),i}return __extends(r,e),r.createComponent=function(e){this.__cycleManagers[e.ConstructorName]||(this.__cycleManagers[e.ConstructorName]=new t.CycleManager(e));var n=this.__cycleManagers[e.ConstructorName].create();return n},r.releaseComponent=function(e,n){this.__cycleManagers[e.ConstructorName]||(this.__cycleManagers[e.ConstructorName]=new t.CycleManager(e)),n.parentInterface.clearInterfaces(),n.removeEventListener(egret.Event.ADDED_TO_STAGE,n.__onAddToStage,n),n.removeEventListener(egret.Event.REMOVED_FROM_STAGE,n.__onRemovedFromStage,n),n.__isInFrameManager&&(i.removeFromFrameSystem(n),n.__isInFrameManager=!1),this.__cycleManagers[e.ConstructorName].release(n)},r.prototype.__onAddToStage=function(){this.onAddToStage(),i.addToFrameSystem(this),this.__isInFrameManager=!0},r.prototype.__onRemovedFromStage=function(){i.removeFromFrameSystem(this),this.__isInFrameManager=!1,this.onRemovedFromStage()},r.prototype.__onNew=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.__onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__onRemovedFromStage,this)},r.prototype.onStart=function(){},r.prototype.onEnd=function(){},r.prototype.onUpdate=function(){},r.prototype.onAddToStage=function(){},r.prototype.onRemovedFromStage=function(){},r.__cycleManagers={},r}(eui.Component);t.Component=r,__reflect(r.prototype,"digitBeats.Component",["digitBeats.ICycleObject"])}(digitBeats||(digitBeats={}));var digitBeats;!function(t){var e=function(){function t(t){this.constructorName=t,this.source=[]}return t.prototype.create=function(){if(this.source.length>0){var t=this.source.pop();return t.onStart(),t.__onNew(),t}var t=new this.constructorName;return t},t.prototype.release=function(t){t.onEnd(),this.source.push(t)},t}();t.CycleManager=e,__reflect(e.prototype,"digitBeats.CycleManager")}(digitBeats||(digitBeats={}));var digitBeats;!function(t){var e=function(){function e(){this.__interfaces={}}return e.prototype.attachInterface=function(t,e,n){this.__interfaces[t]={callFunc:e,thisObject:n}},e.prototype.call=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(t.__isDebugMode&&!this.__interfaces[e])throw new Error("未注册该接口");var r=this.__interfaces[e];return(o=r.callFunc).call.apply(o,[r.thisObject].concat(n));var o},e.prototype.clearInterfaces=function(){this.__interfaces={}},e}();t.InterfaceManager=e,__reflect(e.prototype,"digitBeats.InterfaceManager")}(digitBeats||(digitBeats={}));var digitBeats;!function(t){function e(n){if(void 0==n||n==t.nil)return t.nil;var i;if(n instanceof Array)i=[];else{if(!(n instanceof Object))return i;i=new Object}for(var r in n)n[r]instanceof Object?i[r]=e(n[r]):i[r]=n[r];return i}t.cloneObject=e}(digitBeats||(digitBeats={}));var digitBeats;!function(t){function e(e){t.__isDebugMode=e}t.__isDebugMode=!0,t.modeDebug=e}(digitBeats||(digitBeats={}));